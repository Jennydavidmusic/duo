
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Upcoming Gigs | Jenny & David Live Acoustic Performances in London</title>
<meta name="description" content="Find out where Jenny & David will perform next. Discover upcoming acoustic gigs across London and Greater London.">
<meta name="keywords" content="live music London, acoustic duo gigs, Jenny and David, live performances,London Live events">
<link href="style.css" rel="stylesheet"/>
<link rel="canonical" href="https://jennydavidmusic.com/gigs.html" />
<link rel="icon" type="image/x-icon" href="favicon.ico">
<script>
function addHoursToTime(timeString, hoursToAdd) {
  let [hour, minute] = timeString.split(":").map(Number);
  hour += hoursToAdd;
  let dayOffset = 0;
  if (hour >= 24) {
    hour -= 24;
    dayOffset = 1;
  }
  return {
    time: `${String(hour).padStart(2, '0')}:${String(minute).padStart(2, '0')}`,
    dayOffset
  };
}

function parseDateFRtoISO(dateString) {
  const [day, month, year] = dateString.split("/").map(Number);
  return `${year}-${String(month).padStart(2, "0")}-${String(day).padStart(2, "0")}`;
}

window.addEventListener('DOMContentLoaded', () => {
  fetch("https://docs.google.com/spreadsheets/d/e/TON-LIEN/pub?output=csv") // ← remplace ici par ton vrai lien
    .then(response => response.text())
    .then(csv => {
      const rows = csv.trim().split("\n").slice(1);
      rows.forEach(row => {
        const cols = row.split(",");
        const dateRaw = cols[0];
        const location = cols[1];
        const timeRaw = cols[2];
        const siteWeb = (cols[7] || "").trim();
        const mapsUrl = (cols[9] || "").trim();

        if (!dateRaw || !location || !timeRaw || timeRaw.toLowerCase().includes("private")) return;

        let date = dateRaw.trim();
        if (date.includes("/")) {
          date = parseDateFRtoISO(date); // transforme 16/05/2025 → 2025-05-16
        }

        const originalTime = timeRaw.trim();

        const start = addHoursToTime(originalTime, 1);
        const end = addHoursToTime(start.time, 1); // end = start +1h

        const startDate = `${date}T${start.time}`;

        let endDateString = date;
        if (end.dayOffset === 1) {
          const d = new Date(date);
          d.setDate(d.getDate() + 1);
          endDateString = d.toISOString().split("T")[0];
        }
        const endDate = `${endDateString}T${end.time}`;

        const jsonLd = {
          "@context": "https://schema.org",
          "@type": "MusicEvent",
          "name": `Jenny & David at ${location}`,
          "startDate": startDate,
          "endDate": endDate,
          "location": {
            "@type": "Place",
            "name": location,
            "address": {
              "@type": "PostalAddress",
              "addressLocality": "London",
              "addressCountry": "UK"
            }
          },
          "image": "https://jennydavidmusic.com/images/photo21.jpg",
          "description": "Live acoustic gig with Jenny & David.",
          "organizer": {
            "@type": "Organization",
            "name": "Jenny & David Music"
          },
          "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "GBP",
            "availability": "https://schema.org/InStock",
            "url": "https://jennydavidmusic.com/gigs.html"
          }
        };

        if (siteWeb) jsonLd.location.sameAs = siteWeb;
        if (mapsUrl) jsonLd.location.url = mapsUrl;

        const script = document.createElement('script');
        script.type = 'application/ld+json';
        script.textContent = JSON.stringify(jsonLd);
        document.body.appendChild(script);
      });
    });
});
</script>


<style>
  .gig-table {
    max-width: 800px;
    background: rgba(0,0,0,0.6);
    padding: 20px;
    border-radius: 10px;
    color: gold;
    font-size: 1.1rem;
  }
  .gig-table th, .gig-table td {
    padding: 20px;
    text-align: left;
  }
  .gig-table th {
    border-bottom: 1px solid gold;
  }

  @media (max-width: 768px) {
    body.gigs-page {
      font-size: 1.4rem;
    }
    .gig-table {
      width: 95%;
      margin: 140px auto 0 auto;
      font-size: 1.5rem;
      padding: 30px;
    }
  }

  @media (min-width: 769px) {
    .top-nav {
      display: flex;
      justify-content: center;
      gap: 1rem;
      padding: 1rem;
      border-bottom: 1px solid #D4AF37;
      background-color: #000;
      position: sticky;
      top: 0;
      z-index: 999;
    }
    .top-nav a {
      color: #D4AF37;
      text-decoration: none;
      font-weight: bold;
      text-transform: uppercase;
    }
    #gig-table {
      margin-left: 110px;
    }
  }
</style>


</head>
<body class="gigs-page">

<nav class="hero-nav">
<a href="https://jennydavidmusic.com" title="Return to Jenny & David's homepage – Acoustic Duo in London" aria-label="Home – Jenny and David Acoustic Duo">Home</a>
<a href="about.html" title="Learn more about Jenny & David, a professional acoustic duo based in London" aria-label="About Jenny and David">About</a>
<a href="music.html" title="Watch live videos and listen to acoustic performances by Jenny & David" aria-label="Music and Videos by Jenny and David">Music &amp; Videos</a>
<a href="gigs.html" class="active" title="See upcoming live shows and pub gigs by Jenny & David in London and beyond" aria-label="Upcoming Gigs and Performances">Gigs</a>
<a href="gallery.html" title="Browse photos from weddings, private events, and live performances" aria-label="Photo Gallery of Jenny and David">Gallery</a>
<a href="reviews.html" title="Read client reviews about Jenny & David’s live acoustic music" aria-label="Client Reviews and Testimonials">Reviews</a>
<a href="bookings.html" title="Hire Jenny & David for weddings, private parties, corporate events or pub gigs" aria-label="Book Jenny and David for your event">Bookings</a>
<a href="contact.html" title="Contact Jenny & David to check availability or ask questions about live music bookings" aria-label="Contact Jenny and David">Contact</a>

</nav>

<h1 class="gig-title">
  Jenny & David Live Music – Upcoming Gigs in London & Table Bookings
</h1>

<section class="main-content">
  <div id="gig-table" class="gig-table">Loading gigs...</div>
  <noscript>
    <div class="gig-fallback" style="text-align: center; margin-top: 2rem;">
      <p><strong>Upcoming Gigs:</strong></p>
      <p>Saturday 18 May – <a href="https://maps.google.com?q=The+Green+Pub,+Camden" target="_blank">The Green Pub, Camden</a> at 7:30 PM</p>
      <p>Friday 24 May – <a href="https://maps.google.com?q=The+Crown,+Soho" target="_blank">The Crown, Soho</a> at 8:00 PM</p>
    </div>
  </noscript>
</section>

<div class="hamburger-menu">
  <div class="hamburger-icon" onclick="toggleMenu()">☰</div>
  <div class="hamburger-nav" id="hamburgerNav">
<a href="https://jennydavidmusic.com" title="Return to Jenny & David's homepage – Acoustic Duo in London" aria-label="Home – Jenny and David Acoustic Duo">Home</a>
<a href="about.html" title="Learn more about Jenny & David, a professional acoustic duo based in London" aria-label="About Jenny and David">About</a>
<a href="music.html" title="Watch live videos and listen to acoustic performances by Jenny & David" aria-label="Music and Videos by Jenny and David">Music &amp; Videos</a>
<a href="gigs.html" class="active" title="See upcoming live shows and pub gigs by Jenny & David in London and beyond" aria-label="Upcoming Gigs and Performances">Gigs</a>
<a href="gallery.html" title="Browse photos from weddings, private events, and live performances" aria-label="Photo Gallery of Jenny and David">Gallery</a>
<a href="reviews.html" title="Read client reviews about Jenny & David’s live acoustic music" aria-label="Client Reviews and Testimonials">Reviews</a>
<a href="bookings.html" title="Hire Jenny & David for weddings, private parties, corporate events or pub gigs" aria-label="Book Jenny and David for your event">Bookings</a>
<a href="contact.html" title="Contact Jenny & David to check availability or ask questions about live music bookings" aria-label="Contact Jenny and David">Contact</a>

  </div>
</div>

<script>
  fetch("https://opensheet.elk.sh/1-7nFW51MxrXj1fzymfnCrETIHCMTkYHNZjVx1XX9iug/1")
    .then(response => response.json())
    .then(data => {
      const today = new Date();
      today.setHours(0, 0, 0, 0);

      const parseDate = (str) => {
        const parts = str.split('/');
        return parts.length === 3 ? new Date(parts[2], parts[1] - 1, parts[0]) : null;
      };

      const addOneHour = (timeStr) => {
        const parts = timeStr.split(':');
        let hour = parseInt(parts[0]) + 1;
        const minutes = parts[1];
        const ampm = hour >= 12 ? 'PM' : 'AM';
        hour = hour % 24;
        const hour12 = hour % 12 === 0 ? 12 : hour % 12;
        return `${hour12}:${minutes} ${ampm}`;
      };

      const upcoming = data.filter(row => parseDate(row.Date) >= today);
      if (!upcoming.length) return document.getElementById('gig-table').innerHTML = "<p>No upcoming gigs at the moment.</p>";

      let html = '<table><thead><tr><th>Date</th><th>Venue</th><th>Time</th></tr></thead><tbody>';
      upcoming.forEach(row => {
        const venue = row.Link
          ? `<a href="${row.Link}" target="_blank" style="color: gold; text-decoration: underline;">${row.Venue}</a>`
          : row.Venue;
        const time = row.Time.toLowerCase().includes("private") ? "Private Event" : addOneHour(row.Time);
        html += `<tr><td>${row.Date}</td><td>${venue}</td><td>${time}</td></tr>`;
      });
      html += '</tbody></table>';
      document.getElementById('gig-table').innerHTML = html;
    })
    .catch(err => {
      console.error("Error fetching gigs:", err);
      document.getElementById('gig-table').innerHTML = "<p>Failed to load gigs.</p>";
    });

  // Hamburger menu toggle + click outside
    const button = document.querySelector(".hamburger-icon");
const menu = document.getElementById("hamburgerNav");

button.addEventListener("click", function (e) {
  e.stopPropagation();
  menu.classList.toggle("show");
  button.textContent = menu.classList.contains("show") ? "✖" : "☰";
});

document.addEventListener("click", function () {
  if (menu.classList.contains("show")) {
    menu.classList.remove("show");
    button.textContent = "☰";
  }
});

menu.addEventListener("click", function (e) {
  e.stopPropagation();
});

window.addEventListener("scroll", () => {
  if (menu.classList.contains("show")) {
    menu.classList.remove("show");
    button.textContent = "☰";
  }
});
  </script>

  <!-- AJOUTE CETTE LIGNE ICI -->
  <script src="schema-events-from-sheet.js">
  </script>

</body>
</html>



<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jenny & David - Gigs</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .gig-table {
      max-width: 800px;
      margin: 160px;
      background: rgba(0,0,0,0.6);
      padding: 20px;
      border-radius: 10px;
      color: gold;
      font-size: 1.1rem;
    }
    .gig-table th, .gig-table td {
      padding: 10px;
      text-align: left;
    }
    .gig-table th {
      border-bottom: 1px solid gold;
    }

    @media (max-width: 768px) {
      body.gigs-page {
        font-size: 1.4rem;
      }
      .gig-table {
        width: 95%;
        margin: 140px auto 0 auto;
        font-size: 1.5rem;
        padding: 30px;
      }
      .gigs-banner h2 {
        font-size: 3rem;
      }
      .gigs-page .back-button {
        font-size: 1.4rem;
        padding: 14px 24px;
        top: 80px;
      }
    }
  </style>
</head>

<body class="gigs-page">

  <a href="index.html" class="back-button">← Home</a>

  <nav></nav>

  <section class="main-content">
    <div class="gigs-banner">
      <h2>Upcoming Gigs</h2>
    </div>

    <div id="gig-table" class="gig-table">Loading gigs...</div>
  </section>

  <script>
    fetch("https://opensheet.elk.sh/1-7nFW51MxrXj1fzymfnCrETIHCMTkYHNZjVx1XX9iug/1")
      .then(response => response.json())
      .then(data => {
        const today = new Date();
        today.setHours(0, 0, 0, 0);

        const parseDate = (str) => {
          if (!str) return null;
          const parts = str.split('/');
          if (parts.length === 3) {
            const day = parseInt(parts[0], 10);
            const month = parseInt(parts[1], 10) - 1;
            const year = parseInt(parts[2], 10);
            return new Date(year, month, day);
          }
          return null;
        };

        const addOneHour = (timeStr) => {
          const parts = timeStr.split(':');
          if (parts.length === 2) {
            let hour = parseInt(parts[0], 10) + 1;
            const minutes = parts[1];
            const ampm = hour >= 12 ? 'PM' : 'AM';
            hour = hour % 24;
            const hour12 = hour % 12 === 0 ? 12 : hour % 12;
            return `${hour12}:${minutes} ${ampm}`;
          }
          return timeStr;
        };

        const upcoming = data.filter(row => {
          const rowDate = parseDate(row.Date);
          return rowDate && rowDate >= today;
        });

        if (upcoming.length === 0) {
          document.getElementById('gig-table').innerHTML = "<p>No upcoming gigs at the moment.</p>";
          return;
        }

        // Créer un tableau de toutes les lignes
        let html = '<table><thead><tr><th>Date</th><th>Venue</th><th>Time</th></tr></thead><tbody>';

        upcoming.forEach(row => {
          const updatedTime = addOneHour(row.Time);
          const venueHTML = row.Link
            ? `<a href="${row.Link}" target="_blank" style="color: gold; text-decoration: underline;">${row.Venue}</a>`
            : row.Venue;

          html += `<tr>
                     <td>${row.Date}</td>
                     <td>${venueHTML}</td>
                     <td>${updatedTime}</td>
                   </tr>`;
        });

        html += '</tbody></table>';
        document.getElementById('gig-table').innerHTML = html;
      })
      .catch(err => {
        console.error("Error fetching gigs:", err);
        document.getElementById('gig-table').innerHTML = "<p>Failed to load gigs.</p>";
      });
  </script>
    <!-- Menu Hamburger -->
  <div class="hamburger-menu">
    <div class="hamburger-icon" onclick="toggleMenu()">☰</div>
    <div class="hamburger-nav" id="hamburgerNav">
        <a href="index.html">Home</a>
        <a href="about.html">About</a>
        <a href="music.html">Music & Videos</a>
        
       
        <a href="gallery.html">Gallery</a>
        <a href="reviews.html">Reviews</a>
        <a href="bookings.html">Bookings</a>
        <a href="contact.html">Contact</a>
    </div>
  </div>

  <!-- Script JavaScript -->
  <script>
    function toggleMenu() {
      var nav = document.getElementById('hamburgerNav');
      nav.classList.toggle('show'); // Montre ou cache le menu
    }
  </script>

</body>
</html>
